<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>createBrowserRouter | React Router API Reference</title><meta name="description" content="Documentation for React Router API Reference"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">React Router API Reference</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="../modules/react-router.html">react-router</a></li><li><a href="" aria-current="page">createBrowserRouter</a></li></ul><h1>Function createBrowserRouter</h1></div><section class="tsd-panel"><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="createbrowserrouter"><span class="tsd-kind-call-signature">createBrowserRouter</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">routes</span><span class="tsd-signature-symbol">:</span> <a href="../types/react-router.RouteObject.html" class="tsd-signature-type tsd-kind-type-alias">RouteObject</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">,</span> <span class="tsd-kind-parameter">opts</span><span class="tsd-signature-symbol">?:</span> <a href="../interfaces/react-router.DOMRouterOpts.html" class="tsd-signature-type tsd-kind-interface">DOMRouterOpts</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <a href="../interfaces/react-router.DataRouter.html" class="tsd-signature-type tsd-kind-interface">DataRouter</a><a href="#createbrowserrouter" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Create a new <a href="../interfaces/react-router.DataRouter.html" class="tsd-kind-interface">data router</a> that manages the application
path via <a href="https://developer.mozilla.org/en-US/docs/Web/API/History/pushState" target="_blank" class="external"><code>history.pushState</code></a>
and <a href="https://developer.mozilla.org/en-US/docs/Web/API/History/replaceState" target="_blank" class="external"><code>history.replaceState</code></a>.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">routes</span>: <a href="../types/react-router.RouteObject.html" class="tsd-signature-type tsd-kind-type-alias">RouteObject</a><span class="tsd-signature-symbol">[]</span></span><div class="tsd-comment tsd-typography"><p>Application routes</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">opts</span>: <a href="../interfaces/react-router.DOMRouterOpts.html" class="tsd-signature-type tsd-kind-interface">DOMRouterOpts</a></span><div class="tsd-comment tsd-typography"><p>Options</p>
</div><div class="tsd-comment tsd-typography"></div><ul class="tsd-parameters"><li class="tsd-parameter"><h5 id="basename"><code class="tsd-tag">Optional</code><span class="tsd-kind-property">basename</span><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><p>Basename path for the application.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li class="tsd-parameter"><h5 id="datastrategy"><code class="tsd-tag">Optional</code><span class="tsd-kind-property">dataStrategy</span><span class="tsd-signature-symbol">?: </span><a href="../interfaces/react-router.DataStrategyFunction.html" class="tsd-signature-type tsd-kind-interface">DataStrategyFunction</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><p>Override the default data strategy of running loaders in parallel -
see the <a href="../../how-to/data-strategy">docs</a> for more information.</p>
<pre><code class="tsx"><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">router</span><span class="hl-1"> = </span><span class="hl-0">createBrowserRouter</span><span class="hl-1">(</span><span class="hl-5">routes</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">dataStrategy</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">matches</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">request</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">runClientMiddleware</span><span class="hl-1">,</span><br/><span class="hl-1">  }) {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">matchesToLoad</span><span class="hl-1"> = </span><span class="hl-5">matches</span><span class="hl-1">.</span><span class="hl-0">filter</span><span class="hl-1">((</span><span class="hl-5">m</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">      </span><span class="hl-5">m</span><span class="hl-1">.</span><span class="hl-0">shouldCallHandler</span><span class="hl-1">(),</span><br/><span class="hl-1">    );</span><br/><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">results</span><span class="hl-1">: </span><span class="hl-7">Record</span><span class="hl-1">&lt;</span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-7">DataStrategyResult</span><span class="hl-1">&gt; = {};</span><br/><span class="hl-1">    </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">runClientMiddleware</span><span class="hl-1">(() </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">      </span><span class="hl-7">Promise</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-5">matchesToLoad</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-3">async</span><span class="hl-1"> (</span><span class="hl-5">match</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-5">results</span><span class="hl-1">[</span><span class="hl-5">match</span><span class="hl-1">.</span><span class="hl-5">route</span><span class="hl-1">.</span><span class="hl-5">id</span><span class="hl-1">] = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">match</span><span class="hl-1">.</span><span class="hl-0">resolve</span><span class="hl-1">();</span><br/><span class="hl-1">        }),</span><br/><span class="hl-1">      ),</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">    </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">results</span><span class="hl-1">;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-comment tsd-typography"></div></li><li class="tsd-parameter"><h5 id="future"><code class="tsd-tag">Optional</code><span class="tsd-kind-property">future</span><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Partial</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">FutureConfig</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><p>Future flags to enable for the router.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li class="tsd-parameter"><h5 id="getcontext"><code class="tsd-tag">Optional</code><span class="tsd-kind-property">getContext</span><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-symbol">()</span> <span class="tsd-signature-symbol">=&gt;</span> <span class="tsd-signature-type">MaybePromise</span><span class="tsd-signature-symbol">&lt;</span><a href="../classes/react-router.RouterContextProvider.html" class="tsd-signature-type tsd-kind-class">RouterContextProvider</a><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><p>A function that returns an <a href="../classes/react-router.RouterContextProvider.html" class="tsd-kind-class">RouterContextProvider</a> instance
which is provided as the <code>context</code> argument to client <a href="../../start/data/route-object#action"><code>action</code></a>s,
<a href="../../start/data/route-object#loader"><code>loader</code></a>s and <a href="../../how-to/middleware">middleware</a>.
This function is called to generate a fresh <code>context</code> instance on each
navigation or fetcher call.</p>
<pre><code class="tsx"><span class="hl-4">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">createContext</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">RouterContextProvider</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&quot;react-router&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">apiClientContext</span><span class="hl-1"> = </span><span class="hl-0">createContext</span><span class="hl-1">&lt;</span><span class="hl-7">APIClient</span><span class="hl-1">&gt;();</span><br/><br/><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">createBrowserRouter</span><span class="hl-1">(</span><span class="hl-5">routes</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-5">getContext</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-5">let</span><span class="hl-1"> </span><span class="hl-5">context</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">RouterContextProvider</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-5">context</span><span class="hl-1">.</span><span class="hl-5">set</span><span class="hl-1">(</span><span class="hl-5">apiClientContext</span><span class="hl-1">, </span><span class="hl-5">getApiClient</span><span class="hl-1">());</span><br/><span class="hl-1">    </span><span class="hl-5">return</span><span class="hl-1"> </span><span class="hl-5">context</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-comment tsd-typography"></div></li><li class="tsd-parameter"><h5 id="hydrationdata"><code class="tsd-tag">Optional</code><span class="tsd-kind-property">hydrationData</span><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Partial</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">Pick</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/react-router.RouterState.html" class="tsd-signature-type tsd-kind-interface">RouterState</a><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;loaderData&quot;</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">&quot;actionData&quot;</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">&quot;errors&quot;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><p>When Server-Rendering and opting-out of automatic hydration, the
<code>hydrationData</code> option allows you to pass in hydration data from your
server-render. This will almost always be a subset of data from the
<a href="../interfaces/react-router.StaticHandlerContext.html" class="tsd-kind-interface">StaticHandlerContext</a> value you get back from the <a href="../interfaces/react-router.StaticHandler.html" class="tsd-kind-interface">StaticHandler</a>'s
<code>query</code> method:</p>
<pre><code class="tsx"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">router</span><span class="hl-1"> = </span><span class="hl-0">createBrowserRouter</span><span class="hl-1">(</span><span class="hl-5">routes</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-5">hydrationData:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">loaderData:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">// [routeId]: serverLoaderData</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-6">// may also include `errors` and/or `actionData`</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Partial Hydration Data</strong></p>
<p>You will almost always include a complete set of <code>loaderData</code> to hydrate a
server-rendered app. But in advanced use-cases (such as Framework Mode's
<a href="../../start/framework/route-module#clientLoader"><code>clientLoader</code></a>), you may
want to include <code>loaderData</code> for only some routes that were loaded/rendered
on the server. This allows you to hydrate <em>some</em> of the routes (such as the
app layout/shell) while showing a <code>HydrateFallback</code> component and running
the <a href="../../start/data/route-object#loader"><code>loader</code></a>s for other routes
during hydration.</p>
<p>A route <a href="../../start/data/route-object#loader"><code>loader</code></a> will run during
hydration in two scenarios:</p>
<ol>
<li>No hydration data is provided
In these cases the <code>HydrateFallback</code> component will render on initial
hydration</li>
<li>The <code>loader.hydrate</code> property is set to <code>true</code>
This allows you to run the <a href="../../start/data/route-object#loader"><code>loader</code></a>
even if you did not render a fallback on initial hydration (i.e., to
prime a cache with hydration data)</li>
</ol>
<pre><code class="tsx"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">router</span><span class="hl-1"> = </span><span class="hl-0">createBrowserRouter</span><span class="hl-1">(</span><br/><span class="hl-1">  [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;root&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">loader:</span><span class="hl-1"> </span><span class="hl-5">rootLoader</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">Component:</span><span class="hl-1"> </span><span class="hl-5">Root</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">children:</span><span class="hl-1"> [</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;index&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-5">loader:</span><span class="hl-1"> </span><span class="hl-5">indexLoader</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-5">HydrateFallback:</span><span class="hl-1"> </span><span class="hl-5">IndexSkeleton</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-5">Component:</span><span class="hl-1"> </span><span class="hl-5">Index</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ],</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">hydrationData:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">loaderData:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">root:</span><span class="hl-1"> </span><span class="hl-2">&quot;ROOT DATA&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-6">// No index data provided</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-comment tsd-typography"></div></li><li class="tsd-parameter"><h5 id="patchroutesonnavigation"><code class="tsd-tag">Optional</code><span class="tsd-kind-property">patchRoutesOnNavigation</span><span class="tsd-signature-symbol">?: </span><a href="../types/react-router.PatchRoutesOnNavigationFunction.html" class="tsd-signature-type tsd-kind-type-alias">PatchRoutesOnNavigationFunction</a></h5><div class="tsd-comment tsd-typography"><p>Lazily define portions of the route tree on navigations.
See <a href="../types/react-router.PatchRoutesOnNavigationFunction.html" class="tsd-kind-type-alias">PatchRoutesOnNavigationFunction</a>.</p>
<p>By default, React Router wants you to provide a full route tree up front via
<code>createBrowserRouter(routes)</code>. This allows React Router to perform synchronous
route matching, execute loaders, and then render route components in the most
optimistic manner without introducing waterfalls. The tradeoff is that your
initial JS bundle is larger by definition â€” which may slow down application
start-up times as your application grows.</p>
<p>To combat this, we introduced <a href="../../start/data/route-object#lazy"><code>route.lazy</code></a>
in <a href="https://github.com/remix-run/react-router/blob/main/CHANGELOG.md#v690" target="_blank" class="external">v6.9.0</a>
which lets you lazily load the route <em>implementation</em> (<a href="../../start/data/route-object#loader"><code>loader</code></a>,
<a href="../../start/data/route-object#Component"><code>Component</code></a>, etc.) while still
providing the route <em>definition</em> aspects up front (<code>path</code>, <code>index</code>, etc.).
This is a good middle ground. React Router still knows about your route
definitions (the lightweight part) up front and can perform synchronous
route matching, but then delay loading any of the route implementation
aspects (the heavier part) until the route is actually navigated to.</p>
<p>In some cases, even this doesn't go far enough. For huge applications,
providing all route definitions up front can be prohibitively expensive.
Additionally, it might not even be possible to provide all route definitions
up front in certain Micro-Frontend or Module-Federation architectures.</p>
<p>This is where <code>patchRoutesOnNavigation</code> comes in (<a href="https://github.com/remix-run/react-router/discussions/11113" target="_blank" class="external">RFC</a>).
This API is for advanced use-cases where you are unable to provide the full
route tree up-front and need a way to lazily &quot;discover&quot; portions of the route
tree at runtime. This feature is often referred to as <a href="https://en.wikipedia.org/wiki/Fog_of_war" target="_blank" class="external">&quot;Fog of War&quot;</a>,
because similar to how video games expand the &quot;world&quot; as you move around -
the router would be expanding its routing tree as the user navigated around
the app - but would only ever end up loading portions of the tree that the
user visited.</p>
<p><code>patchRoutesOnNavigation</code> will be called anytime React Router is unable to
match a <code>path</code>. The arguments include the <code>path</code>, any partial <code>matches</code>,
and a <code>patch</code> function you can call to patch new routes into the tree at a
specific location. This method is executed during the <code>loading</code> portion of
the navigation for <code>GET</code> requests and during the <code>submitting</code> portion of
the navigation for non-<code>GET</code> requests.</p>
<details>
  <summary><b>Example <code>patchRoutesOnNavigation</code> Use Cases</b></summary>
<p><strong>Patching children into an existing route</strong></p>
<pre><code class="tsx"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">router</span><span class="hl-1"> = </span><span class="hl-0">createBrowserRouter</span><span class="hl-1">(</span><br/><span class="hl-1">  [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;root&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;/&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">Component:</span><span class="hl-1"> </span><span class="hl-5">RootComponent</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">patchRoutesOnNavigation</span><span class="hl-1">({ </span><span class="hl-5">patch</span><span class="hl-1">, </span><span class="hl-5">path</span><span class="hl-1"> }) {</span><br/><span class="hl-1">      </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">path</span><span class="hl-1"> === </span><span class="hl-2">&quot;/a&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-6">// Load/patch the `a` route as a child of the route with id `root`</span><br/><span class="hl-1">        </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">route</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">getARoute</span><span class="hl-1">();</span><br/><span class="hl-1">        </span><span class="hl-6">//  ^ { path: &#39;a&#39;, Component: A }</span><br/><span class="hl-1">        </span><span class="hl-0">patch</span><span class="hl-1">(</span><span class="hl-2">&quot;root&quot;</span><span class="hl-1">, [</span><span class="hl-5">route</span><span class="hl-1">]);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>In the above example, if the user clicks a link to <code>/a</code>, React Router
won't match any routes initially and will call <code>patchRoutesOnNavigation</code>
with a <code>path = &quot;/a&quot;</code> and a <code>matches</code> array containing the root route
match. By calling <code>patch('root', [route])</code>, the new route will be added
to the route tree as a child of the <code>root</code> route and React Router will
perform matching on the updated routes. This time it will successfully
match the <code>/a</code> path and the navigation will complete successfully.</p>
<p><strong>Patching new root-level routes</strong></p>
<p>If you need to patch a new route to the top of the tree (i.e., it doesn't
have a parent), you can pass <code>null</code> as the <code>routeId</code>:</p>
<pre><code class="tsx"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">router</span><span class="hl-1"> = </span><span class="hl-0">createBrowserRouter</span><span class="hl-1">(</span><br/><span class="hl-1">  [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;root&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;/&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">Component:</span><span class="hl-1"> </span><span class="hl-5">RootComponent</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">patchRoutesOnNavigation</span><span class="hl-1">({ </span><span class="hl-5">patch</span><span class="hl-1">, </span><span class="hl-5">path</span><span class="hl-1"> }) {</span><br/><span class="hl-1">      </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">path</span><span class="hl-1"> === </span><span class="hl-2">&quot;/root-sibling&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-6">// Load/patch the `/root-sibling` route as a sibling of the root route</span><br/><span class="hl-1">        </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">route</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">getRootSiblingRoute</span><span class="hl-1">();</span><br/><span class="hl-1">        </span><span class="hl-6">//  ^ { path: &#39;/root-sibling&#39;, Component: RootSibling }</span><br/><span class="hl-1">        </span><span class="hl-0">patch</span><span class="hl-1">(</span><span class="hl-3">null</span><span class="hl-1">, [</span><span class="hl-5">route</span><span class="hl-1">]);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Patching subtrees asynchronously</strong></p>
<p>You can also perform asynchronous matching to lazily fetch entire sections
of your application:</p>
<pre><code class="tsx"><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">router</span><span class="hl-1"> = </span><span class="hl-0">createBrowserRouter</span><span class="hl-1">(</span><br/><span class="hl-1">  [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;/&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">Component:</span><span class="hl-1"> </span><span class="hl-5">Home</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">patchRoutesOnNavigation</span><span class="hl-1">({ </span><span class="hl-5">patch</span><span class="hl-1">, </span><span class="hl-5">path</span><span class="hl-1"> }) {</span><br/><span class="hl-1">      </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">path</span><span class="hl-1">.</span><span class="hl-0">startsWith</span><span class="hl-1">(</span><span class="hl-2">&quot;/dashboard&quot;</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">children</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">import</span><span class="hl-1">(</span><span class="hl-2">&quot;./dashboard&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">patch</span><span class="hl-1">(</span><span class="hl-3">null</span><span class="hl-1">, </span><span class="hl-5">children</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">path</span><span class="hl-1">.</span><span class="hl-0">startsWith</span><span class="hl-1">(</span><span class="hl-2">&quot;/account&quot;</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">children</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-3">import</span><span class="hl-1">(</span><span class="hl-2">&quot;./account&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">patch</span><span class="hl-1">(</span><span class="hl-3">null</span><span class="hl-1">, </span><span class="hl-5">children</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><docs-info>If in-progress execution of <code>patchRoutesOnNavigation</code> is
interrupted by a later navigation, then any remaining <code>patch</code> calls in
the interrupted execution will not update the route tree because the
operation was cancelled.</docs-info></p>
<p><strong>Co-locating route discovery with route definition</strong></p>
<p>If you don't wish to perform your own pseudo-matching, you can leverage
the partial <code>matches</code> array and the <a href="../../start/data/route-object#handle"><code>handle</code></a>
field on a route to keep the children definitions co-located:</p>
<pre><code class="tsx"><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">router</span><span class="hl-1"> = </span><span class="hl-0">createBrowserRouter</span><span class="hl-1">(</span><br/><span class="hl-1">  [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;/&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">Component:</span><span class="hl-1"> </span><span class="hl-5">Home</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;/dashboard&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">children:</span><span class="hl-1"> [</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-6">// If we want to include /dashboard in the critical routes, we need to</span><br/><span class="hl-1">          </span><span class="hl-6">// also include it&#39;s index route since patchRoutesOnNavigation will not be</span><br/><span class="hl-1">          </span><span class="hl-6">// called on a navigation to `/dashboard` because it will have successfully</span><br/><span class="hl-1">          </span><span class="hl-6">// matched the `/dashboard` parent route</span><br/><span class="hl-1">          </span><span class="hl-5">index:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-6">// ...</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ],</span><br/><span class="hl-1">      </span><span class="hl-5">handle:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">lazyChildren</span><span class="hl-5">:</span><span class="hl-1"> () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-3">import</span><span class="hl-1">(</span><span class="hl-2">&quot;./dashboard&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;/account&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">children:</span><span class="hl-1"> [</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-5">index:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-6">// ...</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ],</span><br/><span class="hl-1">      </span><span class="hl-5">handle:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">lazyChildren</span><span class="hl-5">:</span><span class="hl-1"> () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-3">import</span><span class="hl-1">(</span><span class="hl-2">&quot;./account&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">patchRoutesOnNavigation</span><span class="hl-1">({ </span><span class="hl-5">matches</span><span class="hl-1">, </span><span class="hl-5">patch</span><span class="hl-1"> }) {</span><br/><span class="hl-1">      </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">leafRoute</span><span class="hl-1"> = </span><span class="hl-5">matches</span><span class="hl-1">[</span><span class="hl-5">matches</span><span class="hl-1">.</span><span class="hl-5">length</span><span class="hl-1"> - </span><span class="hl-14">1</span><span class="hl-1">]?.</span><span class="hl-5">route</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">leafRoute</span><span class="hl-1">?.</span><span class="hl-5">handle</span><span class="hl-1">?.</span><span class="hl-5">lazyChildren</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">children</span><span class="hl-1"> =</span><br/><span class="hl-1">          </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">leafRoute</span><span class="hl-1">.</span><span class="hl-5">handle</span><span class="hl-1">.</span><span class="hl-0">lazyChildren</span><span class="hl-1">();</span><br/><span class="hl-1">        </span><span class="hl-0">patch</span><span class="hl-1">(</span><span class="hl-5">leafRoute</span><span class="hl-1">.</span><span class="hl-5">id</span><span class="hl-1">, </span><span class="hl-5">children</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>A note on routes with parameters</strong></p>
<p>Because React Router uses ranked routes to find the best match for a
given path, there is an interesting ambiguity introduced when only a
partial route tree is known at any given point in time. If we match a
fully static route such as <code>path: &quot;/about/contact-us&quot;</code> then we know we've
found the right match since it's composed entirely of static URL segments.
Thus, we do not need to bother asking for any other potentially
higher-scoring routes.</p>
<p>However, routes with parameters (dynamic or splat) can't make this
assumption because there might be a not-yet-discovered route that scores
higher. Consider a full route tree such as:</p>
<pre><code class="tsx"><span class="hl-6">// Assume this is the full route tree for your app</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">routes</span><span class="hl-1"> = [</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;/&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">Component:</span><span class="hl-1"> </span><span class="hl-5">Home</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&quot;blog&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;/blog&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">Component:</span><span class="hl-1"> </span><span class="hl-5">BlogLayout</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">children:</span><span class="hl-1"> [</span><br/><span class="hl-1">      { </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;new&quot;</span><span class="hl-1">, </span><span class="hl-5">Component:</span><span class="hl-1"> </span><span class="hl-5">NewPost</span><span class="hl-1"> },</span><br/><span class="hl-1">      { </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;:slug&quot;</span><span class="hl-1">, </span><span class="hl-5">Component:</span><span class="hl-1"> </span><span class="hl-5">BlogPost</span><span class="hl-1"> },</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">];</span>
</code><button type="button">Copy</button></pre>

<p>And then assume we want to use <code>patchRoutesOnNavigation</code> to fill this in
as the user navigates around:</p>
<pre><code class="tsx"><span class="hl-6">// Start with only the index route</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">router</span><span class="hl-1"> = </span><span class="hl-0">createBrowserRouter</span><span class="hl-1">(</span><br/><span class="hl-1">  [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;/&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">Component:</span><span class="hl-1"> </span><span class="hl-5">Home</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">patchRoutesOnNavigation</span><span class="hl-1">({ </span><span class="hl-5">patch</span><span class="hl-1">, </span><span class="hl-5">path</span><span class="hl-1"> }) {</span><br/><span class="hl-1">      </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">path</span><span class="hl-1"> === </span><span class="hl-2">&quot;/blog/new&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">patch</span><span class="hl-1">(</span><span class="hl-2">&quot;blog&quot;</span><span class="hl-1">, [</span><br/><span class="hl-1">          {</span><br/><span class="hl-1">            </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;new&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">Component:</span><span class="hl-1"> </span><span class="hl-5">NewPost</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">        ]);</span><br/><span class="hl-1">      } </span><span class="hl-4">else</span><span class="hl-1"> </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">path</span><span class="hl-1">.</span><span class="hl-0">startsWith</span><span class="hl-1">(</span><span class="hl-2">&quot;/blog&quot;</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-0">patch</span><span class="hl-1">(</span><span class="hl-2">&quot;blog&quot;</span><span class="hl-1">, [</span><br/><span class="hl-1">          {</span><br/><span class="hl-1">            </span><span class="hl-5">path:</span><span class="hl-1"> </span><span class="hl-2">&quot;:slug&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">Component:</span><span class="hl-1"> </span><span class="hl-5">BlogPost</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">        ]);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>If the user were to a blog post first (i.e., <code>/blog/my-post</code>) we would
patch in the <code>:slug</code> route. Then, if the user navigated to <code>/blog/new</code> to
write a new post, we'd match <code>/blog/:slug</code> but it wouldn't be the <em>right</em>
match! We need to call <code>patchRoutesOnNavigation</code> just in case there
exists a higher-scoring route we've not yet discovered, which in this
case there is.</p>
<p>So, anytime React Router matches a path that contains at least one param,
it will call <code>patchRoutesOnNavigation</code> and match routes again just to
confirm it has found the best match.</p>
<p>If your <code>patchRoutesOnNavigation</code> implementation is expensive or making
side effect <a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch" target="_blank" class="external"><code>fetch</code></a>
calls to a backend server, you may want to consider tracking previously
seen routes to avoid over-fetching in cases where you know the proper
route has already been found. This can usually be as simple as
maintaining a small cache of prior <code>path</code> values for which you've already
patched in the right routes:</p>
<pre><code class="tsx"><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">discoveredRoutes</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">();</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">router</span><span class="hl-1"> = </span><span class="hl-0">createBrowserRouter</span><span class="hl-1">(</span><span class="hl-5">routes</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">patchRoutesOnNavigation</span><span class="hl-1">({ </span><span class="hl-5">patch</span><span class="hl-1">, </span><span class="hl-5">path</span><span class="hl-1"> }) {</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">discoveredRoutes</span><span class="hl-1">.</span><span class="hl-0">has</span><span class="hl-1">(</span><span class="hl-5">path</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-6">// We&#39;ve seen this before so nothing to patch in and we can let the router</span><br/><span class="hl-1">      </span><span class="hl-6">// use the routes it already knows about</span><br/><span class="hl-1">      </span><span class="hl-4">return</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">discoveredRoutes</span><span class="hl-1">.</span><span class="hl-0">add</span><span class="hl-1">(</span><span class="hl-5">path</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// ... patch routes in accordingly</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</details></div><div class="tsd-comment tsd-typography"></div></li><li class="tsd-parameter"><h5 id="unstable_instrumentations"><code class="tsd-tag">Optional</code><span class="tsd-kind-property">unstable_instrumentations</span><span class="tsd-signature-symbol">?: </span><a href="../types/react-router.unstable_ClientInstrumentation.html" class="tsd-signature-type tsd-kind-type-alias">unstable_ClientInstrumentation</a><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><p>Array of instrumentation objects allowing you to instrument the router and
individual routes prior to router initialization (and on any subsequently
added routes via <code>route.lazy</code> or <code>patchRoutesOnNavigation</code>).  This is
mostly useful for observability such as wrapping navigations, fetches,
as well as route loaders/actions/middlewares with logging and/or performance
tracing.  See the <a href="../../how-to/instrumentation">docs</a> for more information.</p>
<pre><code class="tsx"><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">router</span><span class="hl-1"> = </span><span class="hl-0">createBrowserRouter</span><span class="hl-1">(</span><span class="hl-5">routes</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-5">unstable_instrumentations:</span><span class="hl-1"> [</span><span class="hl-5">logging</span><span class="hl-1">]</span><br/><span class="hl-1">});</span><br/><br/><br/><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">logging</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">router</span><span class="hl-1">({ </span><span class="hl-5">instrument</span><span class="hl-1"> }) {</span><br/><span class="hl-1">    </span><span class="hl-0">instrument</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-0">navigate</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">impl</span><span class="hl-1">, </span><span class="hl-5">info</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">logExecution</span><span class="hl-1">(</span><span class="hl-2">`navigate </span><span class="hl-3">${</span><span class="hl-5">info</span><span class="hl-12">.</span><span class="hl-5">to</span><span class="hl-3">}</span><span class="hl-2">`</span><span class="hl-1">, </span><span class="hl-5">impl</span><span class="hl-1">),</span><br/><span class="hl-1">      </span><span class="hl-0">fetch</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">impl</span><span class="hl-1">, </span><span class="hl-5">info</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">logExecution</span><span class="hl-1">(</span><span class="hl-2">`fetch </span><span class="hl-3">${</span><span class="hl-5">info</span><span class="hl-12">.</span><span class="hl-5">to</span><span class="hl-3">}</span><span class="hl-2">`</span><span class="hl-1">, </span><span class="hl-5">impl</span><span class="hl-1">)</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">route</span><span class="hl-1">({ </span><span class="hl-5">instrument</span><span class="hl-1">, </span><span class="hl-5">id</span><span class="hl-1"> }) {</span><br/><span class="hl-1">    </span><span class="hl-0">instrument</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-0">middleware</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">impl</span><span class="hl-1">, </span><span class="hl-5">info</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">logExecution</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">`middleware </span><span class="hl-3">${</span><span class="hl-5">info</span><span class="hl-12">.</span><span class="hl-5">request</span><span class="hl-12">.</span><span class="hl-5">url</span><span class="hl-3">}</span><span class="hl-2"> (route </span><span class="hl-3">${</span><span class="hl-5">id</span><span class="hl-3">}</span><span class="hl-2">)`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">impl</span><br/><span class="hl-1">      ),</span><br/><span class="hl-1">      </span><span class="hl-0">loader</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">impl</span><span class="hl-1">, </span><span class="hl-5">info</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">logExecution</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">`loader </span><span class="hl-3">${</span><span class="hl-5">info</span><span class="hl-12">.</span><span class="hl-5">request</span><span class="hl-12">.</span><span class="hl-5">url</span><span class="hl-3">}</span><span class="hl-2"> (route </span><span class="hl-3">${</span><span class="hl-5">id</span><span class="hl-3">}</span><span class="hl-2">)`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">impl</span><br/><span class="hl-1">      ),</span><br/><span class="hl-1">      </span><span class="hl-0">action</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">impl</span><span class="hl-1">, </span><span class="hl-5">info</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">logExecution</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">`action </span><span class="hl-3">${</span><span class="hl-5">info</span><span class="hl-12">.</span><span class="hl-5">request</span><span class="hl-12">.</span><span class="hl-5">url</span><span class="hl-3">}</span><span class="hl-2"> (route </span><span class="hl-3">${</span><span class="hl-5">id</span><span class="hl-3">}</span><span class="hl-2">)`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">impl</span><br/><span class="hl-1">      ),</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">logExecution</span><span class="hl-1">(</span><span class="hl-5">label</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-0">impl</span><span class="hl-1">: () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-7">void</span><span class="hl-1">&gt;) {</span><br/><span class="hl-1">  </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">start</span><span class="hl-1"> = </span><span class="hl-5">performance</span><span class="hl-1">.</span><span class="hl-0">now</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`start </span><span class="hl-3">${</span><span class="hl-5">label</span><span class="hl-3">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">impl</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">duration</span><span class="hl-1"> = </span><span class="hl-5">Math</span><span class="hl-1">.</span><span class="hl-0">round</span><span class="hl-1">(</span><span class="hl-5">performance</span><span class="hl-1">.</span><span class="hl-0">now</span><span class="hl-1">() - </span><span class="hl-5">start</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`end </span><span class="hl-3">${</span><span class="hl-5">label</span><span class="hl-3">}</span><span class="hl-2"> (</span><span class="hl-3">${</span><span class="hl-5">duration</span><span class="hl-3">}</span><span class="hl-2">ms)`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-comment tsd-typography"></div></li><li class="tsd-parameter"><h5 id="window"><code class="tsd-tag">Optional</code><span class="tsd-kind-property">window</span><span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Window</span></h5><div class="tsd-comment tsd-typography"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window" target="_blank" class="external"><code>Window</code></a> object
override. Defaults to the global <code>window</code> instance.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></li></ul></div><h4 class="tsd-returns-title">Returns <a href="../interfaces/react-router.DataRouter.html" class="tsd-signature-type tsd-kind-interface">DataRouter</a></h4><p>An initialized <a href="../interfaces/react-router.DataRouter.html" class="tsd-kind-interface">data router</a> to pass to <a href="react-router.RouterProvider.html" class="tsd-kind-function"><code>&lt;RouterProvider&gt;</code></a></p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-mode"><h4 class="tsd-anchor-link" id="mode">Mode<a href="#mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>data</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/remix-run/react-router/blob/d5ef31d0e019c390d8f8937f5f34263b09abbaca/packages/react-router/lib/dom/lib.tsx#L644">packages/react-router/lib/dom/lib.tsx:644</a></li></ul></aside></div></li></ul></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">React Router API Reference</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
